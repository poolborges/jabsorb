<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="css/site.css" />
    <title>JSON-RPC-Java</title>
  </head>
  <body bgcolor="#ffffff">
    <h1><img align="left" valign="texttop" src="images/json.png" width="55" height="55" hspace="6" vspace="0" />JSON-RPC-Java</h1>
    <div class="tagline">JavaScript to Java remote scripting.</div>
    <hr>
    <div class="menu"><a href="index.html">Home</a> | <a href="tutorial.html">Tutorial</a> | <a href="test.jsp">Demo</a> | <a href="docs/">API Documentation</a> | <a href="http://oss.metaparadigm.com/mailman/listinfo/json-rpc-java">Mailing List</a> | <a href="CHANGES.txt">Changelog</a></div>

    <h2>JSON-RPC-Java Tutorial</h2>

    <p>This tutorial briefly describes how to get your JavaScript client code to call methods in a Java server application using JSON-RPC-Java and the jsolait JavaScript JSON-RPC client.</p>

    <h2>Requirements</h2>
    <ul>
      <li>A Java Servlet container (such as Apache Tomcat)</li>
    </ul>

    <h2>Adding the JSONRPCServlet to your web.xml</h2>
    <p>Use the following web.xml (or add the servlet and servlet-mapping to your existing one)</p>
    <pre>
<?xml version="1.0" encoding="ISO-8859-1"?>
&lt;!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
  "http://java.sun.com/dtd/web-app_2_3.dtd"&gt;
&lt;web-app&gt;
  &lt;servlet&gt;
    &lt;servlet-name&gt;com.metaparadigm.jsonrpc.JSONRPCServlet&lt;/servlet-name&gt;
    &lt;servlet-class&gt;com.metaparadigm.jsonrpc.JSONRPCServlet&lt;/servlet-class&gt;
  &lt;/servlet&gt;
  &lt;servlet-mapping&gt;
    &lt;servlet-name&gt;com.metaparadigm.jsonrpc.JSONRPCServlet&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/JSON-RPC&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;
&lt;/web-app&gt;
    </pre>

    <h2>Placing the JSONRPCBridge in your JSP</h2>
    <p>An instance of the JSONRPCBridge object needs to be placed in a HttpSession object registered under the attribute "JSONRPCBridge" to allow the JSONRPCServlet to locate the bridge.</p>
<p>The bridge is implemented as session specific to improve the security of applications by allowing exporting of object methods only to specific HttpSessions.</p>
<p>To use the bridge to allow calling of Java methods you can easily place a bridge in a HttpSession in JSP using the usebean tag. eg.</p>
<div class="code-block">&lt;jsp:useBean id="JSONRPCBridge" scope="session" class="com.metaparadigm.jsonrpc.JSONRPCBridge" /&gt;</div>
<p>Then export the object you wish to call methods on. eg.</p>
<div class="code-block">&lt;% JSONRPCBridge.registerObject("myTestObject", aTestObject); %&gt;</div>
<p>That is all that is requied to make available all methods of the object as myTestObject.&lt;methodnames&gt; to JSON-RPC clients.</p>
<p>Take a look at the example <a href="test.jsp.xml">test.jsp</a> for more details.</p>

<h2>Example client code using jsolait client (included in source distribution)</h2>
<p>Add to your JSP to load jsolait and your client script:</p>
<pre>
...
  &lt;script type="text/javascript" src="jsonrpc.js"&gt;
  &lt;script type="text/javascript" src="test.js"&gt;
...
</pre>
<h3>Example JavaScript source</h3>
<pre>
var jsonurl = "/jsonrpc/JSON-RPC";
var jsonserver = null;

onLoad = function()
{
    try {
	jsonserver = new JSONRpcClient(jsonurl);
    } catch(e) {
	alert(e);
    }

    // Call a Java method on the server
    jsonserver.myTestObject.myFunction("hello");
}
</pre>
<p>Take a look at the example <a href="test.js.txt">test.js</a> for more details</p>

    <br>
    <hr />
    <p>
      <table cellpadding="0" cellspacing="0" border="0" width="100%">
	<tr>
	  <td><!-- hhmts start -->
Last modified: Sun Jan 23 08:39:17 SGT 2005
<!-- hhmts end --></td>
	  <td><div class="copyright">Copyright 2005 <a href="http://www.metaparadigm.com/">Metaparadigm Pte Ltd</a></div></td>
	</tr>
      </table>
    </p>
  </body>
</html>
